# This file is to see deviants done by Netic

## Add default_to_oauth_authentication to storage_account module
- Date: 07/02/2024
- File(s): modules/storage_account/storage_account.tf
- Who: JTL (Entry made by MFR)
- PR: https://github.com/neticdk-k8s/terraform-azurerm-caf/pull/4/files

### Reason:
The default_to_oauth_authentication attribute is missing in the CAF module, so we added it (https://registry.terraform.io/providers/hashicorp/azurerm/3.68.0/docs/resources/storage_account#default_to_oauth_authentication)

## Fix naming of oauth2_permission_scope
- Date: 07/02/2024
- File(s): modules/azuread/applications/module.tf, modules/azuread/applications_v1/azuread_application.tf
- Who: MFR
- PR: https://github.com/neticdk-k8s/terraform-azurerm-caf/pull/4/files

### Reason:
In the for_each they used the wrong name of the dynamic oauth2_permission_scope, they've used "for_each = try(var.settings.api.oauth2_permission_scopes, [])" instead of "for_each = try(var.settings.api.oauth2_permission_scope, []) (the s in the end of oauth2_permission_scopes need to be removed)"

## Fix Storage Account Customer managed Key Conflict
- Date: 20/12/2023
- File(s): modules/storage_account/storage_account.tf
- Who: MFR
- PR: https://github.com/neticdk-k8s/terraform-azurerm-caf/pull/3/files

### Reason:
For some unknown reason the azurerm_storage_account resource sometimes loads the customer_managed_key settings which it shouldn't, because it's using the resource azurerm_storage_account_customer_managed_key (You can find it in the https://github.com/neticdk-k8s/terraform-azurerm-caf/blob/5.7.3_linux_os_config/storage_accounts.tf file).

That means there's actually two different resources that can configure Customer Managed Keys. The azurerm_storage_account resource and the azurerm_storage_account_customer_managed_key resource. USING BOTH WILL MAKE CONFLICT USE ONLY azurerm_storage_account_customer_managed_key :-)

## Create random_string_prefix output variable
- Date: 21/11/2023
- File(s): output.tf
- Who: MFR
- PR: https://github.com/neticdk-k8s/terraform-azurerm-caf/pull/2/files

### Reason:
Added the random_string_prefix output variable, so we can use the random generated prefix which gets generated by the resource "random_string.prefix" in the local.tf file for our own Netic modules

## Fix max_surge variable for nodepools
- Date: 26/10/2023
- File(s): modules/compute/aks/aks.tf
- Who: MFR
- PR: https://github.com/neticdk-k8s/terraform-azurerm-caf/pull/1/files

### Reason:
I was getting tired of configuring in my local .terraform folder everytime when I had to upgrade a cluster. I had to hardcode max_surge to 3 every time

Then I also had to add max_surge in main.tf file.

But now we can just add the max_surge in the main.tf file without fixing it locally in .terraform first

## Remove breaking bug caused by unnecessary var.resource_location variable
- Date: 22/09/2023
- File(s): modules/diagnostics/module.tf
- Who: MFR
- PR: It's missing, sorry

### Reason:
It didn't make sense to add var.resource_location, because you already have to add the ID of the storage account.

It caused a major bug in our landingzone module, because the resource_location had to be hardcoded, which doesn't make sense since we have storage accounts in different regions.
